<h1 class="text-3xl font-bold text-gray-800 mb-8">Dashboard</h1>

<%# Stats Cards %>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
  <div class="bg-white rounded-lg shadow p-6">
    <div class="text-gray-500 text-sm">Total Users</div>
    <div class="text-3xl font-bold text-job-blue-dark"><%= @total_users %></div>
    <div class="text-sm text-gray-500 mt-2">
      <span class="text-green-600"><%= @total_job_seekers %></span> job seekers,
      <span class="text-blue-600"><%= @total_employers %></span> employers
    </div>
  </div>

  <div class="bg-white rounded-lg shadow p-6">
    <div class="text-gray-500 text-sm">Total Jobs</div>
    <div class="text-3xl font-bold text-job-blue-dark"><%= @total_jobs %></div>
    <div class="text-sm text-gray-500 mt-2">
      <span class="text-green-600"><%= @active_jobs %></span> active,
      <span class="text-yellow-600"><%= @pending_jobs %></span> pending
    </div>
  </div>

  <div class="bg-white rounded-lg shadow p-6">
    <div class="text-gray-500 text-sm">Applications</div>
    <div class="text-3xl font-bold text-job-blue-dark"><%= @total_applications %></div>
  </div>

  <div class="bg-white rounded-lg shadow p-6">
    <div class="text-gray-500 text-sm">Pending Approval</div>
    <div class="text-3xl font-bold text-yellow-600"><%= @pending_jobs %></div>
    <% if @pending_jobs > 0 %>
      <%= link_to "Review", approvals_lakay_jobs_path, class: "text-job-blue text-sm hover:underline" %>
    <% end %>
  </div>
</div>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
  <%# Recent Users %>
  <div class="bg-white rounded-lg shadow">
    <div class="px-6 py-4 border-b border-gray-200">
      <h2 class="text-lg font-bold text-gray-800">Recent Users</h2>
    </div>
    <div class="p-6">
      <table class="w-full">
        <thead>
          <tr class="text-left text-sm text-gray-500">
            <th class="pb-3">Name</th>
            <th class="pb-3">Role</th>
            <th class="pb-3">Joined</th>
          </tr>
        </thead>
        <tbody>
          <% @recent_users.each do |user| %>
            <tr class="border-t border-gray-100">
              <td class="py-3"><%= user.full_name %></td>
              <td class="py-3">
                <span class="px-2 py-1 rounded text-xs <%= user.employer? ? 'bg-blue-100 text-blue-800' : 'bg-green-100 text-green-800' %>">
                  <%= user.role.humanize %>
                </span>
              </td>
              <td class="py-3 text-gray-500 text-sm"><%= time_ago_in_words(user.created_at) %> ago</td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <%# Recent Jobs %>
  <div class="bg-white rounded-lg shadow">
    <div class="px-6 py-4 border-b border-gray-200">
      <h2 class="text-lg font-bold text-gray-800">Recent Jobs</h2>
    </div>
    <div class="p-6">
      <table class="w-full">
        <thead>
          <tr class="text-left text-sm text-gray-500">
            <th class="pb-3">Title</th>
            <th class="pb-3">Status</th>
            <th class="pb-3">Posted</th>
          </tr>
        </thead>
        <tbody>
          <% @recent_jobs.each do |job| %>
            <tr class="border-t border-gray-100">
              <td class="py-3">
                <%= link_to job.title, [:lakay, job], class: "text-job-blue hover:underline" %>
              </td>
              <td class="py-3">
                <% if job.approved? %>
                  <span class="px-2 py-1 rounded text-xs bg-green-100 text-green-800">Approved</span>
                <% else %>
                  <span class="px-2 py-1 rounded text-xs bg-yellow-100 text-yellow-800">Pending</span>
                <% end %>
              </td>
              <td class="py-3 text-gray-500 text-sm"><%= time_ago_in_words(job.created_at) %> ago</td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
